if (self.CavalryLogger) { CavalryLogger.start_js(["cygUO"]); }

__d('XUISidebar',['csx','DirectionalDockingElement','DOMDimensions','DOMQuery','Event','SubscriptionsHandler','Run','ViewportBounds','getElementPosition','getViewportDimensions','throttle'],(function a(b,c,d,e,f,g,h){var i="._2yaa";function j(k){'use strict';this.$XUISidebar1=new (c('DirectionalDockingElement'))(k);this.$XUISidebar3=k;this.$XUISidebar4();var l=c('throttle')(this.$XUISidebar4.bind(this));this.$XUISidebar2=new (c('SubscriptionsHandler'))();this.$XUISidebar2.addSubscriptions(c('Event').listen(window,'resize',l),c('Event').listen(this.$XUISidebar3,'resize',l),c('Run').onLeave(this.$XUISidebar5.bind(this)))}j.prototype.$XUISidebar5=function(){'use strict';if(this.$XUISidebar2)this.$XUISidebar2.release();this.$XUISidebar2=null};j.prototype.$XUISidebar4=function(){var k,l=this;'use strict';var m=c('DOMDimensions').getElementDimensions(this.$XUISidebar3).height,n=c('getElementPosition')(this.$XUISidebar3).y,o=c('ViewportBounds').getTop(),p=c('getViewportDimensions')().height-o,q=p-m;if(m<p){q=o}else (function(){var r=[];c('DOMQuery').scry(l.$XUISidebar3,i).forEach(function(v){r.push(c('getElementPosition')(v).y)});r.sort(function(v,w){return v-w});for(var s=0,t=r.length;s<t;s++){var u=r[s]-n;if(m-u<p){q=o-u;break}}})();this.$XUISidebar1.setOffset(q)};f.exports=j}),null);
__d('LeftNavScrollable',['Event','LeftNavFitToHeight','Parent','Run','XUISidebar'],(function a(b,c,d,e,f,g){var h=void 0,i=void 0,j={init:function l(m){if(h){c('Event').fire(window,'resize');return}i=c('Parent').bySelector(m,'#leftCol');if(!(i instanceof HTMLElement))return;h=i.appendChild(document.createElement('div'));while(h!==i.firstChild&&i.firstChild)h.appendChild(i.firstChild);h.style.paddingTop='12px';i.style.marginTop='-12px';new (c('XUISidebar'))(h);c('LeftNavFitToHeight').destroy();c('Event').fire(window,'resize');c('Run').onLeave(k)}};function k(){i=null;h=null}f.exports=j}),null);
__d('ScopedSearchItemView.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$ScopedSearchItemView1=function(){this.props.onSelectAttempt(this.props.entry)}.bind(this),m}k.prototype.render=function(){'use strict';var l="_1jh9"+(this.props.highlighted?' '+"_1jha":'')+(this.props.entry.isSeeMore?' '+"_5wtr":'')+(' '+"_599m");return c('React').createElement('li',{className:l,onMouseDown:this.$ScopedSearchItemView1},c('React').createElement('span',{className:"_5wts",rel:'ignore'},c('React').createElement('a',{href:this.props.entry.getURI()},c('React').createElement('span',{className:"_5wtt"},c('React').createElement('span',{className:"_5wtu"})),c('React').createElement('span',{className:"_5wtv"},this.props.entry.getTitle()))))};f.exports=k}),null);
__d('ScopedSearchListView.react',['cx','React','ScopedSearchItemView.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';var l="_5mrx"+(' '+"_599r")+(!this.props.entries.length?' '+"_599s":'');return c('React').createElement('div',{className:l},this.props.entries.map(function(m){return c('React').createElement(c('ScopedSearchItemView.react'),{entry:m,key:m.getUniqueID(),highlighted:m==this.props.highlightedEntry,onSelectAttempt:this.props.onSelectAttempt,queryString:this.props.queryString})}.bind(this)))};function k(){'use strict';i.apply(this,arguments)}f.exports=k}),null);
__d('ScopedSearchableEntry',['SearchableEntry'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('SearchableEntry'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.isSeeMore=k.isSeeMore;this.uri=k.uri}j.prototype.setPosition=function(k){'use strict';this.$ScopedSearchableEntry1=k;return this};j.prototype.getPosition=function(){'use strict';return this.$ScopedSearchableEntry1};f.exports=j}),null);
__d("XScopedSearchTypeaheadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/async\/search\/scoped\/typeahead\/",{value:{type:"String"},entity_id:{type:"Int"},entity_type:{type:"Enum",enumType:1},sid:{type:"String"},max_results:{type:"Int"}})}),null);
__d('ScopedSearchTypeahead.react',['ix','cx','fbt','DOMQuery','FacebarStructuredText','Focus','Image.react','React','ReactDOM','ScopedSearchableEntry','ScopedSearchListView.react','URI','WebAsyncSearchSourceWithMetrics','XScopedSearchTypeaheadController','XUITypeahead.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$ScopedSearchTypeahead2=function(){return JSON.stringify(this.state.matchingEntries.map(function(t){return t.getUniqueID()}))}.bind(this);this.$ScopedSearchTypeahead1=function(t){return new (c('ScopedSearchableEntry'))({uniqueID:t.uid,title:t.text,type:t.type,fragments:t.fragments,queryString:this.state.queryString,uri:t.uri})}.bind(this);this.$ScopedSearchTypeahead3=function(t){new (c('URI'))(t.uri).go();this.state.searchSource.reportSelect(t.getUniqueID(),t.getType(),t.getPosition(),true,this.state.queryString,null)}.bind(this);this.$ScopedSearchTypeahead4=function(){new (c('URI'))(this.props.baseSearchURI).addQueryData('query',this.state.queryString).go();this.state.searchSource.reportSelect(this.state.queryString,'keyword',-1,false,this.state.queryString,null)}.bind(this);this.$ScopedSearchTypeahead5=function(t){if(this.state.queryString){var u=this.state.queryString.trim(),v=j._("See all results for \"{query}\"",[j.param('query',u)]).toString(),w=new (c('URI'))(this.props.baseSearchURI).addQueryData({query:u}).toString();t.push(new (c('ScopedSearchableEntry'))({uniqueID:v,title:v,queryString:this.state.queryString,structure:c('FacebarStructuredText').fromString(v),isSeeMore:true,uri:w}))}t.map(function(x,y){return x.setPosition(y)});this.setState({matchingEntries:t})}.bind(this);this.$ScopedSearchTypeahead6=function(){this.state.searchSource.sessionEnd()}.bind(this);this.$ScopedSearchTypeahead7=function(){this.state.searchSource.sessionStart()}.bind(this);this.$ScopedSearchTypeahead8=function(t){this.setState({queryString:t.target.value})}.bind(this);var p={uri:c('XScopedSearchTypeaheadController').getURIBuilder().getURI(),data:{entity_id:o.entityID,entity_type:o.entityType}},q={bootstrapRequests:[p],queryRequests:[p],getAllForEmptyQuery:true,packageFn:this.$ScopedSearchTypeahead1},r={event_name:o.loggerEventName,log:this.$ScopedSearchTypeahead2},s=new (c('WebAsyncSearchSourceWithMetrics'))(q,r);s.sessionStart();this.state={matchingEntries:[],queryString:'',searchSource:s}}n.prototype.componentWillMount=function(){this.setState({queryString:c('DOMQuery').find(this.props.stubSearchBox,'input').value})};n.prototype.componentDidMount=function(){if(this.state.queryString){var o=c('ReactDOM').findDOMNode(this).querySelector('input[type="text"]');c('Focus').set(o);o.selectionStart=o.selectionEnd=o.value.length}};n.prototype.componentWillUnmount=function(){this.state.searchSource.sessionEnd()};n.prototype.render=function(){var o={ViewRenderer:c('ScopedSearchListView.react'),useLayer:true,extraRendererProps:{alwaysVisibleOnFocus:true,onSelectAttempt:this.$ScopedSearchTypeahead3,queryString:this.state.queryString}};return c('React').createElement('div',{className:"_3lv7"},c('React').createElement(c('XUITypeahead.react'),{className:"_5mrx",onChange:this.$ScopedSearchTypeahead8,onBlur:this.$ScopedSearchTypeahead6,onFocus:this.$ScopedSearchTypeahead7,onEnterWithoutSelection:this.$ScopedSearchTypeahead4,onEntriesFound:this.$ScopedSearchTypeahead5,onSelectAttempt:this.$ScopedSearchTypeahead3,placeholder:this.props.placeholder,presenter:o,queryString:this.state.queryString,searchSource:this.state.searchSource,showEntriesOnFocus:true}),c('React').createElement('div',{className:"_3lv8"},c('React').createElement(c('Image.react'),{src:h("142454")})))};n.propTypes={entityID:m.number.isRequired,entityType:m.string.isRequired,baseSearchURI:m.string.isRequired,loggerEventName:m.string.isRequired,placeholder:m.string.isRequired,stubSearchBox:m.object.isRequired};f.exports=n}),null);